"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function _construct(t,e,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,r){var s=[null];s.push.apply(s,e);var n=new(Function.bind.apply(t,s));return r&&_setPrototypeOf(n,r.prototype),n}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){var r="Scradar";"function"==typeof define&&define.amd?define([],e(r)):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(r):t[r]=e(r)}(window||module||{},function(k){var F={},s={trigger:null,prefix:"",progressVisible:!1,progressFill:!1,progressFull:!1,progressStart:!1,progressEnd:!1,offsetStart:!1,offsetEnd:!1,peak:null,once:!1};function n(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this?(F.this=this,F.name=k,F.target=".scradar",F.settings=s,F.totalProgress=!0,F.prevScroll=null,F.wheel={complete:null},"string"==typeof e[0]&&(F.target=e[0]),"object"===_typeof(e[e.length-1])&&Object.assign(F,e[e.length-1]),F.boundary=!0===F.boundary?.5:F.boundary,F.this.element=F.element=document.querySelectorAll(F.target),F.this.initialize()):_construct(n,e)}var _=new IntersectionObserver(function(t){t.forEach(function(t){0===t.intersectionRatio||t.target[k.toLowerCase()].settings.done?t.target[k.toLowerCase()].settings.mount=!1:(t.target[k.toLowerCase()].settings.mount=!0,t.target[k.toLowerCase()].settings.unmount=!1)})},{threshold:[0,1e-5,.99999,1]}),L=function(t){return JSON.parse(t.replace(/'/g,'"').replace(/([\w\d]+:)/g,'"$1":').replace(/:"/g,'"'))},z=function(t,e,r){return"css"===r?"--"+(e?e+"-":"")+t.replace(/([A-Z])/g,"-$1").toLowerCase():"data"===r?e?e+t[0].toUpperCase()+t.slice(1):t:void 0},O=function(t,e){var r=0;if(t===window){var s=document.createElement("div");"width"===e?(s.style.width="100vw",document.body.append(s),r=s.offsetWidth||window.innerWidth):"height"===e&&(s.style.height="100vh",document.body.append(s),r=s.offsetHeight||window.innerHeight),s.remove()}else"width"===e?r=t.offsetWidth:"height"===e&&(r=t.offsetHeight);return r},P=function(t,e,r){if(!t||!e)return!1;(t=Array.isArray(t)?t:[t]).forEach(function(t){t.style.setProperty(e,r)})},x=function(t,e,r){if(!t||!e)return!1;(t=Array.isArray(t)?t:[t]).forEach(function(t){t.dataset[e]=r})},j=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!t||!e)return!1;(t=Array.isArray(t)?t:[t]).forEach(function(t){r?t.dispatchEvent(new CustomEvent(e,{detail:r})):t.dispatchEvent(new Event(e))})},I=function(l,c,d){var f=c[0].toUpperCase()+c.slice(1);void 0===l["progress"+f]||!l["current".concat(f,"Step")]&&0!==l["current".concat(f,"Step")]||l.settings[c+"Step"].forEach(function(t,e){var r,s=l.settings[c+"Step"].length-1,n=0<e?e-1:0,i=e<s-1?e+1:s,o=l.settings[c+"Step"][n],a=l.settings[c+"Step"][i];a&&e!==i&&l["progress"+f]>=t&&l["progress"+f]<a?r=e:(o||-9999===o)&&e!==n&&l["progress"+f]<t&&l["progress"+f]>=o&&(r=n),!r&&0!==r||l["current".concat(f,"Step")]===r||(j(d,"stepChange",{step:r,prevStep:l["current".concat(f,"Step")],maxStep:s-1,isInitial:!l.init}),x(d,c+"Step",r),l["current".concat(f,"Step")]=r)})},e=function(t,e){var r=window.scrollY,E=O(window,"width"),A=O(window,"height");if(null!==F.prevScroll&&(r>F.prevScroll?1!==F.scradarScroll&&(document.documentElement.dataset.scradarScroll=F.this.scroll=F.scradarScroll=1,j(window,"scrollTurn",{scroll:1})):r<F.prevScroll?-1!==F.scradarScroll&&(document.documentElement.dataset.scradarScroll=F.this.scroll=F.scradarScroll=-1,j(window,"scrollTurn",{scroll:-1})):document.documentElement.dataset.scradarScroll=F.this.scroll=F.scradarScroll=0),300<Math.abs(F.prevScroll-r)&&0===r)return F.prevScroll=0,F.this.update(),!1;if(F.prevScroll=r,F.totalProgress&&(document.documentElement.dataset.scradarProgress=F.this.progress=window.scrollY/(document.documentElement.scrollHeight-A)),e&&F.element.forEach(function(t){var e=t[k.toLowerCase()],r=e.settings.container?document.querySelector(e.settings.container):window;e.containerSize=e.settings.horizontal?O(r,"width"):O(r,"height"),e.containerStart=0,e.containerEnd=e.containerSize,e.elementSize=e.settings.horizontal?t.offsetWidth:t.offsetHeight}),F.element.forEach(function(r){var s=r[k.toLowerCase()],t=s.settings.receiver?Array.from(document.querySelectorAll(s.settings.receiver)).filter(function(t){return!Array.from(F.element).includes(t)}):[],e=[r].concat(_toConsumableArray(t));if(s.settings.breakPoint&&Object.keys(s.settings.breakPoint).sort().forEach(function(t){t<=E?Object.assign(s.settings,s.settings.breakPoint[t]):Object.keys(s.settings.breakPoint[t]).forEach(function(t){var e=L(r.dataset.scradar);e[t]?s.settings[t]=e[t]:s.settings[t]&&delete s.settings[t]});var e=s.settings.container?document.querySelector(s.settings.container):window;s.containerSize=s.settings.horizontal?O(e,"width"):O(e,"height"),s.containerStart=0,s.containerEnd=s.containerSize,s.elementSize=s.settings.horizontal?r.offsetWidth:r.offsetHeight}),s.init&&s.settings.unmount)return!1;s.settings.mount||(s.settings.unmount=!0);var n,i,o=s.settings.horizontal?E:A,a=r.getClientRects()[0],l=s.settings.delay?_toConsumableArray(r.querySelectorAll("".concat(s.settings.delay,":not(.disabled)"))).reduce(function(t,e){return t+e.offsetWidth},0):0,c=s.elementSize-l,d=c-s.containerSize,f=s.triggerId,g=s.settings.horizontal?a.left:a.top,u=g+s.elementSize,p=s.settings.delay?_toConsumableArray(r.querySelectorAll("".concat(s.settings.delay,":not(.disabled)"))).reduce(function(t,e){var r=Math.max(e.offsetWidth+e.offsetLeft+(g+t),0);return 0<=r&&r<=e.offsetWidth?t+=e.offsetWidth-Math.max(Math.min(r,e.offsetWidth),0):e.classList.contains("scradar__delay--end")&&E<=r&&r<=E+e.offsetWidth&&(t+=e.offsetWidth-Math.min(r-E,e.offsetWidth)),t},0):0,h=(g+p)/-d;if(s.progressVisible=u/(-s.containerSize-s.elementSize)+1,s.settings.progressFill&&(n=c>s.containerSize&&g<=0&&-d<=g?0:c>s.containerSize&&g<=0&&g<-d?1-(g+c)/s.containerSize:-g/(c>s.containerSize?s.containerSize:c)),s.init||(s.settings.mount=0<=g&&g<=o||0<=u&&u<=o||g<0&&o<u,_.observe(r)),c>s.containerSize&&(s.progressFull=Math.min(Math.max(h,0),1)),n&&(s.progressFill=Math.min(Math.max(n,-1),1)),s.offsetStart=g,s.offsetEnd=u,s.progressStart=u/-s.containerSize*(s.containerSize/c)+1,s.progressEnd=(g+d)/(s.containerSize+d),0<s.progressVisible&&s.progressVisible<1?(1!=+r.dataset.scradarIn&&(x(e,"scradarIn",1),j(e,"scrollEnter",{from:g<s.containerStart?"top":"bottom",isInitial:!s.init})),g<=s.containerStart?x(e,"scradarStart",1):x(e,"scradarStart",0),u>=s.containerEnd?x(e,"scradarEnd",1):x(e,"scradarEnd",0),+r.dataset.scradarStart&&+r.dataset.scradarEnd&&!s.isFull?(j(e,"fullIn",{from:-1===F.scradarScroll?"top":1===F.scradarScroll?"bottom":g<s.containerStart?"top":"bottom",isInitial:!s.init}),s.isFull=!0):!s.isFull||+r.dataset.scradarStart&&+r.dataset.scradarEnd||(j(e,"fullOut",{from:+r.dataset.scradarStart?"top":"bottom",isInitial:!s.init}),s.isFull=!1)):(x(e,"scradarStart",0),x(e,"scradarEnd",0),s.settings.once||s.settings.done?s.settings.done=!0:0!=+r.dataset.scradarIn&&(x(e,"scradarIn",0),j(e,"scrollExit",{from:u<s.containerEnd?"top":"bottom",isInitial:!s.init}))),f){var y=F.shadowDom.getElementById(f);g<=y.offsetStart+(s.settings.horizontal?y.offsetWidth:y.offsetHeight)&&u>=y.offsetStart?(0==+r.dataset.scradarFire&&(j(e,"fire",{from:g<=y.offsetStart+(s.settings.horizontal?y.offsetWidth:y.offsetHeight)?"top":"bottom",isInitial:!s.init}),x(e,"scradarFire",1)),1!=+r.dataset.collision&&(j(e,"collisionEnter",{from:g<=y.offsetStart+(s.settings.horizontal?y.offsetWidth:y.offsetHeight)?"top":"bottom",isInitial:!s.init}),x(e,"collision",1))):(r.dataset.collision||x(e,"collision",0),r.dataset.scradarFire?1==+r.dataset.scradarFire&&0!=+r.dataset.collision&&(j(e,"collisionExit",{from:u>=y.offsetStart?"top":"bottom",isInitial:!s.init}),x(e,"collision",0)):x(e,"scradarFire",0))}if((s.settings.progressEnd||s.settings.offsetEnd)&&(i=c-u),(s.progressVisible||0===s.progressVisible)&&(s.settings.progressVisible&&(s.settings.progressVisible.forEach(function(t){"css"===t?P(e,z("progressVisible",s.settings.prefix,"css"),s.progressVisible):"data"===t&&x(e,z("progressVisible",s.settings.prefix,"data"),s.progressVisible)}),I(s,"visible",e),s.settings.eventListen&&s.settings.eventListen.includes("progressVisible")&&j(e,"progressVisibleUpdate",{value:s.progressVisible})),s.settings.peak&&s.settings.peak.peak)){var m=s.settings.peak.peak,S=s.settings.peak.start,b=s.settings.peak.end,w=m-S,v=b-m;s.progressVisible<S||s.progressVisible>b?s.progressPeak=0:s.progressPeak=s.progressVisible<=m?s.progressVisible/w:(b-s.progressVisible)/v,P(e,z("progressPeak",s.settings.prefix,"css"),s.progressPeak),s.settings.eventListen&&s.settings.eventListen.includes("progressPeak")&&j(e,"progressPeakUpdate",{value:s.progressPeak})}s.settings.progressFill&&(s.progressFill||0===s.progressFill)&&(s.settings.progressFill.forEach(function(t){void 0!==s.progressFill&&("css"===t?P(e,z("progressFill",s.settings.prefix,"css"),s.progressFill):"data"===t&&x(e,z("progressFill",s.settings.prefix,"data"),s.progressFill))}),I(s,"fill",e),s.settings.eventListen&&s.settings.eventListen.includes("progressFill")&&j(e,"progressFillUpdate",{value:s.progressFill})),s.settings.progressFull&&(s.progressFull||0===s.progressFull)&&(s.settings.progressFull.forEach(function(t){void 0!==s.progressFull&&("css"===t?P(e,z("progressFull",s.settings.prefix,"css"),s.progressFull):"data"===t&&x(e,z("progressFull",s.settings.prefix,"data"),s.progressFull))}),I(s,"full",e),s.settings.eventListen&&s.settings.eventListen.includes("progressFull")&&j(e,"progressFullUpdate",{value:s.progressFull})),s.settings.progressStart&&(s.settings.progressStart.forEach(function(t){"css"===t?P(e,z("progressStart",s.settings.prefix,"css"),s.progressStart):"data"===t&&x(e,z("progressStart",s.settings.prefix,"data"),s.progressStart)}),I(s,"start",e),s.settings.eventListen&&s.settings.eventListen.includes("progressStart")&&j(e,"progressStartUpdate",{value:s.progressStart})),s.settings.progressEnd&&(s.settings.progressEnd.forEach(function(t){"css"===t?P(e,z("progressEnd",s.settings.prefix,"css"),s.progressEnd):"data"===t&&x(e,z("progressEnd",s.settings.prefix,"data"),s.progressEnd)}),I(s,"end",e),s.settings.eventListen&&s.settings.eventListen.includes("progressEnd")&&j(e,"progressEndUpdate",{value:s.progressEnd})),s.settings.offsetStart&&(s.settings.offsetStart.forEach(function(t){"css"===t?P(e,z("offsetStart",s.settings.prefix,"css"),g):"data"===t&&x(e,z("offsetStart",s.settings.prefix,"data"),g)}),s.settings.eventListen&&s.settings.eventListen.includes("offsetStart")&&j(e,"offsetStartUpdate",{value:g})),s.settings.offsetEnd&&(s.settings.offsetEnd.forEach(function(t){"css"===t?P(e,z("offsetEnd",s.settings.prefix,"css"),i):"data"===t&&x(e,z("offsetEnd",s.settings.prefix,"data"),i)}),s.settings.eventListen&&s.settings.eventListen.includes("offsetEnd")&&j(e,"offsetEndUpdate",{value:i})),!s.init&&(s.init=!0)}),F.boundary){var s=_toConsumableArray(F.element).filter(function(t){return t.dataset.scradarTitle&&1==+t.dataset.scradarIn}),n=A*F.boundary;s.length?(F.scradarTarget=1===s.length?s[0]:s.sort(function(t,e){var r=+t.scradar.progressStart>+t.scradar.progressEnd?t.scradar.offsetEnd-n:A-t.scradar.offsetStart-(A-n),s=+e.scradar.progressStart>+e.scradar.progressEnd?e.scradar.offsetEnd-n:A-e.scradar.offsetStart-(A-n);return s<r?-1:r<s?1:0})[0],document.documentElement.dataset.scradarTarget=F.scradarTarget=s[0].dataset.scradarTitle):F.scradarTarget&&(document.documentElement.dataset.scradarTarget="# "+F.scradarTarget)}},r=function(t){F.wheel.deltaY=t.deltaY,F.wheel.step++,10<F.wheel.step&&Math.abs(F.wheel.deltaY)<=10||Math.abs(F.wheel.deltaY)<=2?(F.wheel.step=0,F.wheel.firstValue=F.wheel.deltaY):1===F.wheel.step&&Math.abs(F.wheel.deltaY)>Math.abs(F.wheel.firstValue)&&j(window,"momentum",{status:0<F.wheel.deltaY?1:-1})},i=function t(){(F.keydownScrollY||0===F.keydownScrollY)&&(F.scrollingWithKeydown||F.keydownScrollY!==window.scrollY?(F.scrollingWithKeydown=!1,F.keydownScrollY=window.scrollY,o(t)()):(F.this.update(),F.keydownScrollY=null))},o=function(e,r){var s=null;return function(t){s&&window.cancelAnimationFrame(s),s=window.requestAnimationFrame(function(){e(t,r)})}};function a(t){var r=this;this.settings=_objectSpread(_objectSpread({},F.settings),t.dataset.scradar?L(t.dataset.scradar):{}),Object.keys(this.settings).forEach(function(t){if(["progressVisible","progressFill","progressFull","progressStart","progressEnd","offsetStart","offsetEnd"].includes(t))if(r.settings[t])if(Array.isArray(r.settings[t])){var e=r.settings[t].filter(function(t){return["css","data"].includes(t)});r.settings[t]=e.length?e:["css"]}else r.settings[t]=["css"];else delete r.settings[t]});var e=this.settings.container?document.querySelector(this.settings.container):window;if(this.containerSize=this.settings.horizontal?O(e,"width"):O(e,"height"),this.containerStart=0,this.containerEnd=this.containerSize,this.elementSize=this.settings.horizontal?t.offsetWidth:t.offsetHeight,["visibleStep","fillStep","fullStep","startStep","endStep"].forEach(function(t){var e=t[0].toUpperCase()+t.slice(1);r.settings[t]&&Array.isArray(r.settings[t])&&(r.settings[t]=_toConsumableArray(new Set([-9999].concat(_toConsumableArray(r.settings[t]),[9999]))).sort(),r["current"+e]=Array.isArray(r.settings[t])&&0)}),this.settings.peak&&Array.isArray(this.settings.peak)&&3===this.settings.peak.length){var s=["start","peak","end"],n=this.settings.peak.reduce(function(t,e,r){return t[s[r]]=e,t},{});this.settings.peak=n}if(this.settings.eventListen&&!Array.isArray(this.settings.eventListen)&&(this.settings.eventListen=[this.settings.eventListen]),this.settings.trigger){var i=document.createElement("div"),o=this.settings.trigger.trim().split(" "),a={position:"fixed",zIndex:-1,pointerEvents:"none",opacity:0,top:o[0],right:o[1]||o[0],bottom:o[2]||o[0],left:o[3]||o[1]||o[0]};Object.assign(i.style,a),i.id=(Math.random()+1).toString(36).substring(2),i.setAttribute("tabindex",-1),this.triggerId=i.id,F.shadowDom.append(i)}}return n.prototype={element:null,scroll:null,progress:null,initialize:function(){var t=document.createElement("div");t.id="scradarTriggerWrapper",document.body.append(t),F.shadowDom=t.attachShadow({mode:"open"}),F.element.forEach(function(t){t[k.toLowerCase()]=new a(t)}),window.addEventListener("scroll",o(e),{passive:!0}),window.addEventListener("wheel",o(r),{passive:!0}),window.addEventListener("resize",o(e,!0)),document.addEventListener("keydown",function(t){(t.metaKey&&("ArrowUp"===t.key||"ArrowDown"===t.key)||"Tab"===t.key||"Home"===t.key||"End"===t.key)&&(F.scrollingWithKeydown=!0,F.keydownScrollY=F.prevScroll,o(i)())}),e()},update:function(t){F.element.forEach(function(t){t[k.toLowerCase()].settings.unmount=!1}),e()},destroy:function(){console.log("***DESTROY***")}},n});